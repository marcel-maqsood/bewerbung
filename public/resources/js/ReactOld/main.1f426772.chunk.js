(this["webpackJsonpreact-bewerbung"]=this["webpackJsonpreact-bewerbung"]||[]).push([[0],{31:function(e,t,a){},32:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),c=a(4),o=a.n(c),i=(a(31),a.p,a(32),a(1));var r=a(6),l=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,60)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,o=t.getTTFB;a(e),n(e),s(e),c(e),o(e)}))},d=a(24),u=a(5),m={messages:[]},g=Object(u.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ITEM":return{messages:[].concat(Object(d.a)(e.messages),[{id:t.payload.id,message:t.payload.message}]),updated:t.payload.lastUpdate};case"ADD_CHAT_DATA":return JSON.parse(localStorage.getItem("messages"))}})),h=a(3),b=a.n(h),p=a(11),j=a(22),v=a(23),C=a(26),f=a(25),y=a(12),x=a.n(y),O=function(e){Object(C.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(j.a)(this,a),(n=t.call(this,e)).state={sendable:!1},n.mapStateToProps=function(e){return{messages:g.getState()}},n.messages=function(e){console.log("state",e);var t="";if(void 0==e.messages)null!==localStorage.getItem("messages")&&void 0!==localStorage.getItem("messages")&&g.dispatch({type:"ADD_CHAT_DATA",payload:localStorage.getItem("messages")});else t=e.messages.messages.map((function(e,t){return Object(i.jsx)("li",{children:e.message},e.id)}));return Object(i.jsx)("ul",{children:t})},n.fetchData=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x.a.post("/api/chat/messages",{currentTime:Date.now(),chatId:"xyz123"}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}));case 1:case"end":return e.stop()}}),e)}))),n.ConnectedCounter=Object(r.b)(n.mapStateToProps)(n.messages),n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchData();case 2:this.intervalId=setInterval((function(){console.log(JSON.parse(localStorage.getItem("messages")).updated)}),1e3);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createChat",value:function(){var e=document.getElementById("requestedChat");return""!==e.value?(console.log("okay."),document.getElementById("requestedChat").classList.remove("btn-outline-danger"),x.a.post("/api/chat/create",{chatId:e.value}).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),!0):(document.getElementById("requestedChat").classList.add("btn-outline-danger"),!1)}},{key:"chatIdUpdate",value:function(){""==document.getElementById("requestedChat").value?document.getElementById("requestedChat").classList.add("btn-outline-danger"):document.getElementById("requestedChat").classList.remove("btn-outline-danger")}},{key:"addAction",value:function(){var e;document.getElementById("messageText").value&&(g.dispatch({type:"ADD_ITEM",payload:{message:(e={id:100*Math.random(),message:document.getElementById("messageText").value,lastUpdate:Date.now()}).message,id:e.id,lastUpdate:e.lastUpdate}}),localStorage.setItem("messages",JSON.stringify(g.getState())))}},{key:"messageChangeAction",value:function(){var e=document.getElementById("messageText");e&&(console.log("test1"),e.value?this.setState({sendable:!0}):this.setState({sendable:!1}))}},{key:"render",value:function(){return console.log(this.state.sendable),document.getElementById("chatId")?this.state.sendable?Object(i.jsxs)("div",{children:[Object(i.jsx)(this.ConnectedCounter,{}),Object(i.jsx)("textarea",{id:"messageText",name:"messageText",onChange:this.messageChangeAction.bind(this)}),Object(i.jsx)("br",{}),Object(i.jsx)("input",{type:"submit",id:"postMessage",name:"postMessage",value:"Nachricht absenden",className:"btn btn-info btn-outline-dark",onClick:this.addAction})]}):Object(i.jsxs)("div",{children:[Object(i.jsx)(this.ConnectedCounter,{}),Object(i.jsx)("textarea",{id:"messageText",name:"messageText",onChange:this.messageChangeAction.bind(this)}),Object(i.jsx)("br",{}),Object(i.jsx)("input",{type:"submit",id:"postMessage",name:"postMessage",value:"Nachricht schreiben",className:"btn btn-secondary btn-outline-dark"})]}):Object(i.jsxs)("div",{className:"mt-5",children:[Object(i.jsx)("button",{type:"button",id:"createChat",className:"btn btn-outline-info mr-1 mb-3",value:"Erstelle einen Chat",onClick:this.createChat,children:"Erstelle einen Chat"}),Object(i.jsx)("button",{type:"button",id:"enterChat",className:"btn btn-outline-info mb-3",value:"Tritt einem Chat bei",children:"Tritt einem Chat Bei"}),Object(i.jsx)("br",{}),Object(i.jsx)("input",{type:"text",id:"requestedChat",placeholder:"Chatraum ID",onChange:this.chatIdUpdate.bind(this),maxlength:"12"})]})}}]),a}(s.a.Component);document.getElementById("Chat")&&o.a.render(Object(i.jsx)(r.a,{store:g,children:Object(i.jsx)(O,{})}),document.getElementById("Chat")),l()}},[[59,1,2]]]);
//# sourceMappingURL=main.1f426772.chunk.js.map